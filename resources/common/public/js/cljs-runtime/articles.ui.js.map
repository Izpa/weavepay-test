{"version":3,"sources":["articles/ui.cljs"],"mappings":"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","names":["articles.ui/pagination-controls","cljs.core/deref","p1__73025#","p1__73026#","total","re_frame.core.subscribe","current-page","per-page","page-input","max-page","x__5083__auto__","y__5084__auto__","js/Math.ceil","cljs.core._EQ_","re-frame.core/dispatch","articles.ui/article-table","articles","iter__5476__auto__","s__73044","cljs.core/LazySeq","temp__5823__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5474__auto__","size__5475__auto__","cljs.core/count","b__73046","cljs.core/chunk-buffer","i__73045","map__73048","cljs.core/-nth","cljs.core/--destructure-map","cljs.core.get","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__73043","cljs.core/chunk-rest","map__73049","cljs.core/first","cljs.core/cons","cljs.core/rest","title","author","date","doi","articles.ui/article-section","p1__73050#","p1__73051#","f","per","err","js/parseInt","cljs.core/empty?","cljs.core/chunk-first"],"sourcesContent":["(ns articles.ui\n  (:require\n   [re-frame.core :as rf]))\n\n(defn pagination-controls\n  []\n  (let [total @(rf/subscribe [:articles-total])\n        current-page @(rf/subscribe [:articles-page])\n        per-page @(rf/subscribe [:articles-per-page])\n        page-input @(rf/subscribe [:articles-page-input])\n        max-page (max 1 (js/Math.ceil (/ total per-page)))]\n    [:div.pagination\n     [:button {:disabled (= current-page 1)\n               :on-click #(rf/dispatch [:change-page 1])} \"<<\"]\n     [:button {:disabled (= current-page 1)\n               :on-click #(rf/dispatch [:change-page (dec current-page)])} \"<\"]\n     [:span \" Page \"]\n     [:input {:type \"number\" :min 1 :max max-page :value page-input\n              :on-change #(rf/dispatch [:update-articles-page-input (.. % -target -value)])\n              :on-key-down #(when (= (.-key %) \"Enter\")\n                              (rf/dispatch [:change-page page-input]))}]\n     [:span (str \" of \" max-page)]\n     [:button {:on-click #(rf/dispatch [:change-page page-input])} \"Go\"]\n     [:button {:disabled (= current-page max-page)\n               :on-click #(rf/dispatch [:change-page (inc current-page)])} \">\"]\n     [:button {:disabled (= current-page max-page)\n               :on-click #(rf/dispatch [:change-page max-page])} \">>\"]]))\n\n(defn article-table\n  [articles]\n  [:table\n   [:thead [:tr [:th \"Publication\"] [:th \"Author\"] [:th \"Date\"] [:th \"DOI\"]]]\n   [:tbody\n    (for [{:keys [title author date doi]} articles]\n      ^{:key doi}\n      [:tr [:td title] [:td author] [:td date] [:td doi]])]])\n\n(defn article-section\n  []\n  (let [articles @(rf/subscribe [:articles-list])\n        total @(rf/subscribe [:articles-total])\n        f @(rf/subscribe [:articles-filter])\n        per @(rf/subscribe [:articles-per-page])\n        err @(rf/subscribe [:articles-error])]\n    [:div\n     [:div\n      [:label \"Filter: \"]\n      [:input {:type \"text\"\n               :value f\n               :on-change #(rf/dispatch [:update-articles-filter (.. % -target -value)])}]\n      [:label \" Per page: \"]\n      [:input {:type \"number\"\n               :min 1\n               :value per\n               :on-change #(rf/dispatch [:update-articles-per-page (js/parseInt (.. % -target -value))])}]\n      [:button {:on-click #(rf/dispatch [:fetch-articles 1])} \"Apply\"]\n      (when err\n        [:p {:style {:color \"red\"}} err])]\n     (cond\n       (nil? articles) [:p \"No articles for your query...\"]\n       (empty? articles) [:p \"No articles in db\"]\n       :else [article-table articles])\n     (when (pos? total)\n       [pagination-controls])]))\n"]}